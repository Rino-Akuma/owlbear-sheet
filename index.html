<script>
const buttons = document.querySelectorAll(".tabs button");
const containers = document.querySelectorAll(".tab-content");

// === КРИТИЧНО ДЛЯ OWLBEAR + GITHACK ===
// беремо шлях ДИНАМІЧНО з того, де реально лежить index.html
const basePath = window.location.href.replace(/index\.html.*$/, "");

buttons.forEach(btn=>{
  btn.addEventListener("click", async ()=>{

    // кнопки
    buttons.forEach(b=>b.classList.remove("active"));
    btn.classList.add("active");

    // ховаємо всі вкладки
    containers.forEach(c=>c.style.display="none");

    const tab = btn.dataset.tab;
    const container = document.getElementById("tab_"+tab);
    container.style.display="block";

    if(!container.dataset.loaded){
      try{
        const html = await fetch(basePath + tab + ".html").then(r=>r.text());
        container.innerHTML = html;

        // даємо час браузеру "побачити" новий HTML
        await new Promise(r=>setTimeout(r, 20));

        const script = document.createElement("script");
        script.src = basePath + tab + ".js";
        document.body.appendChild(script);

        container.dataset.loaded = "true";
      }
      catch(e){
        console.error("Помилка завантаження вкладки:", tab, e);
      }
    }
  });
});

// автоматично відкриваємо першу вкладку
document.querySelector('[data-tab="stats"]').click();
</script>
