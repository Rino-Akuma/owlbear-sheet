<script>
const buttons = document.querySelectorAll(".tabs button");
const containers = document.querySelectorAll(".tab-content");

// === ВАЖЛИВО ДЛЯ GITHACK + OWLBEAR ===
// Базовий шлях до твого репозиторію
const basePath = "https://raw.githack.com/Rino-Akuma/owlbear-sheet/main/";

async function loadTab(tab, container) {
  if (container.dataset.loaded) return;

  try {
    // 1) Завантажуємо HTML (з вимкненим кешем)
    const htmlUrl = basePath + tab + ".html?ts=" + Date.now();
    const html = await fetch(htmlUrl, { cache: "no-store" }).then(r => r.text());
    container.innerHTML = html;

    // 2) Даємо браузеру час побудувати DOM
    await new Promise(resolve => setTimeout(resolve, 30));

    // 3) Підключаємо відповідний JS
    const script = document.createElement("script");
    script.src = basePath + tab + ".js?ts=" + Date.now();
    document.body.appendChild(script);

    container.dataset.loaded = "true";

  } catch (e) {
    console.error("Помилка завантаження вкладки:", tab, e);
  }
}

buttons.forEach(btn => {
  btn.addEventListener("click", async () => {

    buttons.forEach(b => b.classList.remove("active"));
    btn.classList.add("active");

    containers.forEach(c => c.style.display = "none");

    const tab = btn.dataset.tab;
    const container = document.getElementById("tab_" + tab);
    container.style.display = "block";

    await loadTab(tab, container);
  });
});

// Автовідкриття першої вкладки
document.querySelector('[data-tab="stats"]').click();
</script>
